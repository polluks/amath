\hypertarget{floor_8c}{}\section{lib/real/floor.c File Reference}
\label{floor_8c}\index{lib/real/floor.\+c@{lib/real/floor.\+c}}
{\ttfamily \#include \char`\"{}prim.\+h\char`\"{}}\\*
Include dependency graph for floor.\+c\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=155pt]{d9/d21/floor_8c__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
double \hyperlink{floor_8c_a6de60a3e907dcf0bfe3ea8d64f1e8873}{floor} (double x)
\begin{DoxyCompactList}\small\item\em Mathematical floor function. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static const double \hyperlink{floor_8c_acbd466133274923cc0785707fbdeea9a}{huge} = 1.\+0e300
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{floor.\+c@{floor.\+c}!floor@{floor}}
\index{floor@{floor}!floor.\+c@{floor.\+c}}
\subsubsection[{\texorpdfstring{floor(double x)}{floor(double x)}}]{\setlength{\rightskip}{0pt plus 5cm}double floor (
\begin{DoxyParamCaption}
\item[{double}]{x}
\end{DoxyParamCaption}
)}\hypertarget{floor_8c_a6de60a3e907dcf0bfe3ea8d64f1e8873}{}\label{floor_8c_a6de60a3e907dcf0bfe3ea8d64f1e8873}


Mathematical floor function. 

\begin{DoxyVersion}{Version}
1.\+3 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
95/01/18
\end{DoxyDate}

\begin{DoxyPre}
Return x rounded toward -inf to integral value
Method:
 Bit twiddling.
Exception:
 Inexact flag raised if x not equal to floor(x).
\end{DoxyPre}
 \begin{DoxyCopyright}{Copyright}
Copyright (C) 1993 by Sun Microsystems, Inc. All rights reserved.  Developed at Sun\+Soft, a Sun Microsystems, Inc. business. Permission to use, copy, modify, and distribute this software is freely granted, provided that this notice is preserved. 
\end{DoxyCopyright}


Definition at line 66 of file floor.\+c.



References huge.


\begin{DoxyCode}
67 \{
68     \hyperlink{real_2prim_8h_ae91287c8a5f73a8a22a100f50dc4de77}{sword} i0,i1,j0;
69     \hyperlink{real_2prim_8h_a6e60fe0e0f9f8801507e15fe2d893751}{uword} i,j;
70     \hyperlink{real_2prim_8h_a6dadc713499e14ba3088a55409a18983}{EXTRACT\_WORDS}(i0,i1,x);
71     j0 = ((i0>>20)&0x7ff)-0x3ff;
72     \textcolor{keywordflow}{if}(j0<20) \{
73         \textcolor{keywordflow}{if}(j0<0) \{  \textcolor{comment}{/* raise inexact if x != 0 */}
74             \textcolor{keywordflow}{if}(\hyperlink{floor_8c_acbd466133274923cc0785707fbdeea9a}{huge}+x>0.0) \{\textcolor{comment}{/* return 0*sign(x) if |x|<1 */}
75                 \textcolor{keywordflow}{if}(i0>=0) \{
76                     i0=i1=0;
77                 \}
78                 \textcolor{keywordflow}{else} \textcolor{keywordflow}{if}(((i0&0x7fffffff)|i1)!=0)
79                 \{
80                     i0=0xbff00000;
81                     i1=0;
82                 \}
83             \}
84         \} \textcolor{keywordflow}{else} \{
85             i = (0x000fffff)>>j0;
86             \textcolor{keywordflow}{if}(((i0&i)|i1)==0) \textcolor{keywordflow}{return} x; \textcolor{comment}{/* x is integral */}
87             \textcolor{keywordflow}{if}(\hyperlink{floor_8c_acbd466133274923cc0785707fbdeea9a}{huge}+x>0.0) \{    \textcolor{comment}{/* raise inexact flag */}
88                 \textcolor{keywordflow}{if}(i0<0) i0 += (0x00100000)>>j0;
89                 i0 &= (~i);
90                 i1=0;
91             \}
92         \}
93     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (j0>51) \{
94         \textcolor{keywordflow}{if}(j0==0x400) \textcolor{keywordflow}{return} x+x;   \textcolor{comment}{/* inf or NaN */}
95         \textcolor{keywordflow}{else} \textcolor{keywordflow}{return} x;      \textcolor{comment}{/* x is integral */}
96     \} \textcolor{keywordflow}{else} \{
97         i = ((\hyperlink{real_2prim_8h_a6e60fe0e0f9f8801507e15fe2d893751}{uword})(0xffffffff))>>(j0-20);
98         \textcolor{keywordflow}{if}((i1&i)==0) \textcolor{keywordflow}{return} x; \textcolor{comment}{/* x is integral */}
99         \textcolor{keywordflow}{if}(\hyperlink{floor_8c_acbd466133274923cc0785707fbdeea9a}{huge}+x>0.0) \{        \textcolor{comment}{/* raise inexact flag */}
100             \textcolor{keywordflow}{if}(i0<0) \{
101                 \textcolor{keywordflow}{if}(j0==20) i0+=1;
102                 \textcolor{keywordflow}{else} \{
103                     j = i1+(1<<(52-j0));
104                     \textcolor{keywordflow}{if}(j<(\hyperlink{real_2prim_8h_a6e60fe0e0f9f8801507e15fe2d893751}{uword})i1) i0 +=1 ;   \textcolor{comment}{/* got a carry */}
105                     i1=j;
106                 \}
107             \}
108             i1 &= (~i);
109         \}
110     \}
111     \hyperlink{real_2prim_8h_a7f681b987a25d4692229be4e0be0cdf1}{INSERT\_WORDS}(x,i0,i1);
112     \textcolor{keywordflow}{return} x;
113 \}
\end{DoxyCode}


\subsection{Variable Documentation}
\index{floor.\+c@{floor.\+c}!huge@{huge}}
\index{huge@{huge}!floor.\+c@{floor.\+c}}
\subsubsection[{\texorpdfstring{huge}{huge}}]{\setlength{\rightskip}{0pt plus 5cm}const double huge = 1.\+0e300\hspace{0.3cm}{\ttfamily [static]}}\hypertarget{floor_8c_acbd466133274923cc0785707fbdeea9a}{}\label{floor_8c_acbd466133274923cc0785707fbdeea9a}


Definition at line 46 of file floor.\+c.



Referenced by floor().

