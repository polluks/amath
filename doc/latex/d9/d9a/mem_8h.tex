\hypertarget{mem_8h}{}\section{lib/mem.h File Reference}
\label{mem_8h}\index{lib/mem.\+h@{lib/mem.\+h}}
{\ttfamily \#include $<$stddef.\+h$>$}\\*
Include dependency graph for mem.\+h\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=139pt]{d6/da7/mem_8h__incl}
\end{center}
\end{figure}
This graph shows which files directly or indirectly include this file\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{dc/dc3/mem_8h__dep__incl}
\end{center}
\end{figure}
\subsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void $\ast$ \hyperlink{mem_8h_ad19db35dcf54d18c2a8958f1cca6b299}{Alloc\+Mem\+Safe} (size\+\_\+t)
\item 
void \hyperlink{mem_8h_a7436fb912bde69ba18adebfb6974c5eb}{Free\+Mem\+Safe} (void $\ast$)
\item 
void \hyperlink{mem_8h_adcb19646ed930d44f25ddc9f7767a182}{Free\+All\+Safe} ()
\item 
void \hyperlink{mem_8h_ab6e9c298bac20e9c2638ecd520e1fb5f}{Mem\+Usage} (long $\ast$, long $\ast$, long $\ast$)
\end{DoxyCompactItemize}


\subsection{Function Documentation}
\index{mem.\+h@{mem.\+h}!Alloc\+Mem\+Safe@{Alloc\+Mem\+Safe}}
\index{Alloc\+Mem\+Safe@{Alloc\+Mem\+Safe}!mem.\+h@{mem.\+h}}
\subsubsection[{\texorpdfstring{Alloc\+Mem\+Safe(size\+\_\+t)}{AllocMemSafe(size_t)}}]{\setlength{\rightskip}{0pt plus 5cm}void$\ast$ Alloc\+Mem\+Safe (
\begin{DoxyParamCaption}
\item[{size\+\_\+t}]{}
\end{DoxyParamCaption}
)}\hypertarget{mem_8h_ad19db35dcf54d18c2a8958f1cca6b299}{}\label{mem_8h_ad19db35dcf54d18c2a8958f1cca6b299}


Definition at line 67 of file mem.\+c.



References Memory\+Block\+::address, alloc\+\_\+error(), Memory\+List\+::count, Memory\+List\+::first, Memory\+List\+::last, list, Memory\+Block\+::next, Memory\+List\+::peak, and Memory\+List\+::size.


\begin{DoxyCode}
68 \{
69     \textcolor{keyword}{struct }\hyperlink{structMemoryBlock}{MemoryBlock} *newblock;
70     \textcolor{keywordtype}{size\_t} allocsize;
71 
72     \textcolor{keywordflow}{if} (\hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list} == NULL) \{
73         \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list} = (\textcolor{keyword}{struct }\hyperlink{structMemoryList}{MemoryList}*)\hyperlink{mem_8c_a10e2f4ab980f721b99607b350e2b78a6}{ALLOC\_MEM}(\textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} 
      \hyperlink{structMemoryList}{MemoryList}));
74         \textcolor{keywordflow}{if} (!\hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}) \{
75             \hyperlink{mem_8c_addd1a224479313960a376ac194ea467a}{alloc\_error}(\textcolor{stringliteral}{"list"}, \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} \hyperlink{structMemoryList}{MemoryList}));
76             \textcolor{keywordflow}{return} 0;
77         \}
78 
79         \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_a0d47ad7371bb5f38e09ca5f35d85cecb}{first} = NULL;
80         \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_afea5b720cf2a7c326cb53a604b90c354}{last} = NULL;
81         \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_af2065db30ea83a216adb77fbdb59e1e4}{peak} = 0;
82         \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_ac481474722f97086e8316d62502c4881}{size} = 0;
83         \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_a6b5a62d10829b019db9b45eaf1928151}{count} = 0;
84     \}
85 
86     \textcolor{comment}{// Align to bytes of 4}
87     allocsize = (\hyperlink{structMemoryList_ac481474722f97086e8316d62502c4881}{size} + 3) & ~0x03;
88 
89     newblock = (\textcolor{keyword}{struct }\hyperlink{structMemoryBlock}{MemoryBlock}*)\hyperlink{mem_8c_a10e2f4ab980f721b99607b350e2b78a6}{ALLOC\_MEM}(\textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} 
      \hyperlink{structMemoryBlock}{MemoryBlock}));
90     \textcolor{keywordflow}{if} (!newblock) \{
91         \hyperlink{mem_8c_addd1a224479313960a376ac194ea467a}{alloc\_error}(\textcolor{stringliteral}{"block"}, \textcolor{keyword}{sizeof}(\textcolor{keyword}{struct} \hyperlink{structMemoryBlock}{MemoryBlock}));
92         \textcolor{keywordflow}{return} 0;
93     \}
94 
95     newblock->\hyperlink{structMemoryBlock_a3725613ab053a5e2a814061362fe215a}{address} = (\textcolor{keyword}{struct }\hyperlink{structMemoryBlock}{MemoryBlock}*)\hyperlink{mem_8c_a10e2f4ab980f721b99607b350e2b78a6}{ALLOC\_MEM}(allocsize);
96     \textcolor{keywordflow}{if} (!newblock->\hyperlink{structMemoryBlock_a3725613ab053a5e2a814061362fe215a}{address}) \{
97         \hyperlink{mem_8c_ab9a68304873c8c763a501b384e9fe9b6}{FREE\_MEM}(newblock);
98         \hyperlink{mem_8c_addd1a224479313960a376ac194ea467a}{alloc\_error}(\textcolor{stringliteral}{"memory"}, allocsize);
99         \textcolor{keywordflow}{return} 0;
100     \}
101 
102     newblock->\hyperlink{structMemoryBlock_a1d0be8990a795dfe51c99d3ea0ac774e}{size} = allocsize;
103     newblock->\hyperlink{structMemoryBlock_aead31940b4b95725f6f580e2db3cfb87}{next} = NULL;
104 
105     \textcolor{keywordflow}{if}(\hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_a0d47ad7371bb5f38e09ca5f35d85cecb}{first} == NULL) \{
106         \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_a0d47ad7371bb5f38e09ca5f35d85cecb}{first} = newblock;
107         \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_afea5b720cf2a7c326cb53a604b90c354}{last} = newblock;
108     \} \textcolor{keywordflow}{else} \{
109         \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_afea5b720cf2a7c326cb53a604b90c354}{last}->\hyperlink{structMemoryBlock_aead31940b4b95725f6f580e2db3cfb87}{next} = newblock;
110         \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_afea5b720cf2a7c326cb53a604b90c354}{last} = newblock;
111     \}
112 
113     \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_ac481474722f97086e8316d62502c4881}{size} += allocsize;
114     \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_a6b5a62d10829b019db9b45eaf1928151}{count}++;
115 
116     \textcolor{keywordflow}{if} (\hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_ac481474722f97086e8316d62502c4881}{size} > \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_af2065db30ea83a216adb77fbdb59e1e4}{peak}) \{
117         \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_af2065db30ea83a216adb77fbdb59e1e4}{peak} = \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_ac481474722f97086e8316d62502c4881}{size};
118     \}
119 
120     \textcolor{comment}{// DEBUG code}
121     \textcolor{comment}{// Debug(NULL, "Mememory allocated at address (%x)\(\backslash\)n", newblock->address);}
122 
123     \textcolor{keywordflow}{return} newblock->\hyperlink{structMemoryBlock_a3725613ab053a5e2a814061362fe215a}{address};
124 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=258pt]{d9/d9a/mem_8h_ad19db35dcf54d18c2a8958f1cca6b299_cgraph}
\end{center}
\end{figure}


\index{mem.\+h@{mem.\+h}!Free\+All\+Safe@{Free\+All\+Safe}}
\index{Free\+All\+Safe@{Free\+All\+Safe}!mem.\+h@{mem.\+h}}
\subsubsection[{\texorpdfstring{Free\+All\+Safe()}{FreeAllSafe()}}]{\setlength{\rightskip}{0pt plus 5cm}void Free\+All\+Safe (
\begin{DoxyParamCaption}
{}
\end{DoxyParamCaption}
)}\hypertarget{mem_8h_adcb19646ed930d44f25ddc9f7767a182}{}\label{mem_8h_adcb19646ed930d44f25ddc9f7767a182}


Definition at line 172 of file mem.\+c.



References Memory\+Block\+::address, Memory\+List\+::first, list, and Memory\+Block\+::next.



Referenced by Cleanup().


\begin{DoxyCode}
173 \{
174     \textcolor{keyword}{struct }\hyperlink{structMemoryBlock}{MemoryBlock} *current, *\hyperlink{structMemoryBlock_aead31940b4b95725f6f580e2db3cfb87}{next};
175 
176     \textcolor{keywordflow}{if} (\hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list} == NULL) \{
177         \textcolor{keywordflow}{return};
178     \}
179 
180     current = \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_a0d47ad7371bb5f38e09ca5f35d85cecb}{first};
181     \textcolor{keywordflow}{while} (current != NULL) \{
182         next = current->\hyperlink{structMemoryBlock_aead31940b4b95725f6f580e2db3cfb87}{next};
183         \hyperlink{mem_8c_ab9a68304873c8c763a501b384e9fe9b6}{FREE\_MEM}(current->\hyperlink{structMemoryBlock_a3725613ab053a5e2a814061362fe215a}{address});
184         \hyperlink{mem_8c_ab9a68304873c8c763a501b384e9fe9b6}{FREE\_MEM}(current);
185         current = \hyperlink{structMemoryBlock_aead31940b4b95725f6f580e2db3cfb87}{next};
186     \}
187 
188     \hyperlink{mem_8c_ab9a68304873c8c763a501b384e9fe9b6}{FREE\_MEM}(\hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list});
189     \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list} = NULL;
190 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=311pt]{d9/d9a/mem_8h_adcb19646ed930d44f25ddc9f7767a182_icgraph}
\end{center}
\end{figure}


\index{mem.\+h@{mem.\+h}!Free\+Mem\+Safe@{Free\+Mem\+Safe}}
\index{Free\+Mem\+Safe@{Free\+Mem\+Safe}!mem.\+h@{mem.\+h}}
\subsubsection[{\texorpdfstring{Free\+Mem\+Safe(void $\ast$)}{FreeMemSafe(void *)}}]{\setlength{\rightskip}{0pt plus 5cm}void Free\+Mem\+Safe (
\begin{DoxyParamCaption}
\item[{void $\ast$}]{}
\end{DoxyParamCaption}
)}\hypertarget{mem_8h_a7436fb912bde69ba18adebfb6974c5eb}{}\label{mem_8h_a7436fb912bde69ba18adebfb6974c5eb}


Definition at line 126 of file mem.\+c.



References Memory\+Block\+::address, Memory\+List\+::count, dealloc\+\_\+error(), Memory\+List\+::first, Memory\+List\+::last, list, and Memory\+Block\+::next.


\begin{DoxyCode}
127 \{
128     \textcolor{keyword}{struct }\hyperlink{structMemoryBlock}{MemoryBlock} *current, *last;
129 
130     \textcolor{keywordflow}{if} (\hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list} == NULL || block == NULL) \{
131         \hyperlink{mem_8c_a96cb78338e02e8381392c81761887323}{dealloc\_error}(\textcolor{stringliteral}{"list"}, 0);
132         \textcolor{keywordflow}{return};
133     \}
134 
135     \textcolor{keywordflow}{if} (block == NULL) \{
136         \hyperlink{mem_8c_a96cb78338e02e8381392c81761887323}{dealloc\_error}(\textcolor{stringliteral}{"memory"}, 0);
137         \textcolor{keywordflow}{return};
138     \}
139 
140     last = NULL;
141     current = \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_a0d47ad7371bb5f38e09ca5f35d85cecb}{first};
142     \textcolor{keywordflow}{while} (current != NULL && current->\hyperlink{structMemoryBlock_a3725613ab053a5e2a814061362fe215a}{address} != block) \{
143         last = current;
144         current = current->\hyperlink{structMemoryBlock_aead31940b4b95725f6f580e2db3cfb87}{next};
145     \}
146 
147     \textcolor{keywordflow}{if} (current == NULL) \{
148         \hyperlink{mem_8c_a96cb78338e02e8381392c81761887323}{dealloc\_error}(\textcolor{stringliteral}{"address not found"}, block);
149         \textcolor{keywordflow}{return};
150     \}
151 
152     \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_ac481474722f97086e8316d62502c4881}{size} -= current->\hyperlink{structMemoryBlock_a1d0be8990a795dfe51c99d3ea0ac774e}{size};
153     \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_a6b5a62d10829b019db9b45eaf1928151}{count}--;
154 
155     \textcolor{keywordflow}{if} (\hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_a0d47ad7371bb5f38e09ca5f35d85cecb}{first} == current) \{
156         \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_a0d47ad7371bb5f38e09ca5f35d85cecb}{first} = NULL;
157         \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_afea5b720cf2a7c326cb53a604b90c354}{last} = NULL;
158     \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (\hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_afea5b720cf2a7c326cb53a604b90c354}{last} == current) \{
159         last->\hyperlink{structMemoryBlock_aead31940b4b95725f6f580e2db3cfb87}{next} = current->\hyperlink{structMemoryBlock_aead31940b4b95725f6f580e2db3cfb87}{next};
160         \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_afea5b720cf2a7c326cb53a604b90c354}{last} = last;
161     \} \textcolor{keywordflow}{else} \{
162         last->\hyperlink{structMemoryBlock_aead31940b4b95725f6f580e2db3cfb87}{next} = current->\hyperlink{structMemoryBlock_aead31940b4b95725f6f580e2db3cfb87}{next};
163     \}
164 
165     \hyperlink{mem_8c_ab9a68304873c8c763a501b384e9fe9b6}{FREE\_MEM}(current->\hyperlink{structMemoryBlock_a3725613ab053a5e2a814061362fe215a}{address});
166     \hyperlink{mem_8c_ab9a68304873c8c763a501b384e9fe9b6}{FREE\_MEM}(current);
167 
168     \textcolor{comment}{// DEBUG code}
169     \textcolor{comment}{// Debug(NULL, "Mememory deallocated at address (%x)\(\backslash\)n", block);}
170 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=266pt]{d9/d9a/mem_8h_a7436fb912bde69ba18adebfb6974c5eb_cgraph}
\end{center}
\end{figure}


\index{mem.\+h@{mem.\+h}!Mem\+Usage@{Mem\+Usage}}
\index{Mem\+Usage@{Mem\+Usage}!mem.\+h@{mem.\+h}}
\subsubsection[{\texorpdfstring{Mem\+Usage(long $\ast$, long $\ast$, long $\ast$)}{MemUsage(long *, long *, long *)}}]{\setlength{\rightskip}{0pt plus 5cm}void Mem\+Usage (
\begin{DoxyParamCaption}
\item[{long $\ast$}]{, }
\item[{long $\ast$}]{, }
\item[{long $\ast$}]{}
\end{DoxyParamCaption}
)}\hypertarget{mem_8h_ab6e9c298bac20e9c2638ecd520e1fb5f}{}\label{mem_8h_ab6e9c298bac20e9c2638ecd520e1fb5f}


Definition at line 192 of file mem.\+c.



References Memory\+List\+::count, list, Memory\+List\+::peak, and Memory\+List\+::size.



Referenced by Memory\+Statement\+::\+Execute().


\begin{DoxyCode}
193 \{
194     *blocks = \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_a6b5a62d10829b019db9b45eaf1928151}{count};
195     *\hyperlink{structMemoryBlock_a1d0be8990a795dfe51c99d3ea0ac774e}{size} = \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_ac481474722f97086e8316d62502c4881}{size};
196     *peak = \hyperlink{mem_8c_a0c8f6ac3ab8d4ceae90436f3bfc06616}{list}->\hyperlink{structMemoryList_af2065db30ea83a216adb77fbdb59e1e4}{peak};;
197 \}
\end{DoxyCode}


Here is the caller graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=322pt]{d9/d9a/mem_8h_ab6e9c298bac20e9c2638ecd520e1fb5f_icgraph}
\end{center}
\end{figure}


